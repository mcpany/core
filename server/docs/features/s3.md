# S3 / Blob Storage Adapter

MCP Any provides a first-class adapter for S3-compatible object storage services (AWS S3, MinIO, GCS, etc.). This allows AI agents to list, read, write, and delete files in your storage buckets.

## Configuration

To enable S3 support, add an `s3_service` entry to your `upstream_services` configuration.

```yaml
upstream_services:
  - name: "my-s3-bucket"
    s3_service:
      region: "us-east-1"
      bucket: "my-bucket-name"
      # Optional: For non-AWS S3 (e.g., MinIO)
      # endpoint: "http://minio:9000"

      # Authentication (Optional, defaults to env vars AWS_ACCESS_KEY_ID / AWS_SECRET_ACCESS_KEY)
      # access_key_id: "..."
      # secret_access_key: "..."

      # Security
      prefix: "agent-data/" # Only allow access to this prefix
      read_only: false      # Set to true to disable write/delete
```

## Tools

The following tools are automatically registered:

| Tool Name | Description | Inputs |
| :--- | :--- | :--- |
| `list_objects` | List objects in the bucket. | `prefix` (string, optional), `max_keys` (int, default 100) |
| `get_object` | Get the content of an object. | `key` (string) |
| `put_object` | Upload content to an object. | `key` (string), `content` (string), `is_base64` (bool) |
| `delete_object` | Delete an object. | `key` (string) |
| `get_object_metadata` | Get metadata for an object. | `key` (string) |

## Binary Data

For `get_object`, if the content is not valid UTF-8 text, it will be returned as a Base64 encoded string, and the `is_base64` output field will be set to `true`.
For `put_object`, you can set `is_base64: true` to upload binary data provided as a Base64 string.

## Security

-   **Prefix Restriction**: Use the `prefix` configuration option to jail the agent to a specific "subdirectory" (prefix) within the bucket. The agent will not be able to list or access objects outside this prefix.
-   **Read Only**: Set `read_only: true` to prevent modification of data.
