# Copyright 2025 Author(s) of MCP Any
# SPDX-License-Identifier: Apache-2.0

upstream_services:
  - name: disabled-service
    disable: true
    http_service:
      address: http://localhost:8080
      calls:
        echo:
          endpoint_path: /echo
          method: HTTP_METHOD_POST

  - name: tool-disabled-service
    auto_discover_tool: true
    call_policies:
      - rules:
          - name_regex: "^disabled-tool$"
            action: DENY
    http_service:
      address: http://localhost:8080
      calls:
        disabled-tool:
          endpoint_path: /call-3
          method: HTTP_METHOD_GET
        enabled-tool:
          endpoint_path: /enabled
          method: HTTP_METHOD_GET

  - name: call-disabled-service
    auto_discover_tool: true
    call_policies:
      - rules:
          - call_id_regex: "^disabled-call$"
            action: DENY
    http_service:
      address: http://localhost:8080
      calls:
        disabled-call:
          endpoint_path: /disabled
          method: HTTP_METHOD_GET
