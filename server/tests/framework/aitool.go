// Package framework provides testing framework utilities.

package framework

import (
	"time"

	"github.com/mcpany/core/server/tests/integration"
)

// Re-exporting these from the integration package so that framework users
// don't need to import both.
var (
	FindFreePort          = integration.FindFreePort
	NewManagedProcess     = integration.NewManagedProcess
	WaitForTCPPort        = integration.WaitForTCPPort
	GetProjectRoot        = integration.GetProjectRoot
	ServiceStartupTimeout = 15 * time.Second
)

// AITool represents an AI tool used in testing.
type AITool interface {
	// Install performs any necessary installation steps for the AI tool.
	Install()

	// AddMCP registers a new MCP server with the AI tool.
	//
	// Parameters:
	//   name: The name to assign to the MCP server.
	//   endpoint: The URL or address of the MCP server.
	AddMCP(name, endpoint string)

	// RemoveMCP unregisters an MCP server from the AI tool.
	//
	// Parameters:
	//   name: The name of the MCP server to remove.
	RemoveMCP(name string)

	// Run executes the AI tool with a specific prompt.
	//
	// Parameters:
	//   apiKey: The API key to use for authentication with the AI provider.
	//   model: The name of the model to use (e.g., "gemini-1.5-pro").
	//   prompt: The input text prompt to send to the model.
	//
	// Returns:
	//   string: The response generated by the AI tool.
	//   error: An error if the execution fails.
	Run(apiKey, model, prompt string) (string, error)
}
