// Copyright 2025 Author(s) of MCP Any
// SPDX-License-Identifier: Apache-2.0

edition = "2023";

package mcpany.admin.v1;

import "proto/config/v1/upstream_service.proto";
import "proto/mcp_router/v1/mcp_router.proto";

option go_package = "github.com/mcpany/core/proto/admin/v1";
option java_outer_classname = "AdminProto";

// AdminService provides administrative operations for the MCP Any server.
service AdminService {
  // ClearCache clears all cached data in the server.
  rpc ClearCache(ClearCacheRequest) returns (ClearCacheResponse);

  // ListServices returns all registered services.
  rpc ListServices(ListServicesRequest) returns (ListServicesResponse);

  // GetService returns a specific service by ID.
  rpc GetService(GetServiceRequest) returns (GetServiceResponse);

  // ListTools returns all registered tools.
  rpc ListTools(ListToolsRequest) returns (ListToolsResponse);

  // GetTool returns a specific tool by name.
  rpc GetTool(GetToolRequest) returns (GetToolResponse);
}

message ClearCacheRequest {}

message ClearCacheResponse {}

message ListServicesRequest {}

message ListServicesResponse {
  // Deprecated: Use service_states instead.
  repeated mcpany.config.v1.UpstreamServiceConfig services = 1 [deprecated = true];
  repeated ServiceState service_states = 2;
}

message GetServiceRequest {
  string service_id = 1;
}

message GetServiceResponse {
  // Deprecated: Use service_state instead.
  mcpany.config.v1.UpstreamServiceConfig service = 1 [deprecated = true];
  ServiceState service_state = 2;
}

message ListToolsRequest {}

message ListToolsResponse {
  repeated mcpany.mcp_router.v1.Tool tools = 1;
}

message GetToolRequest {
  string tool_name = 1;
}

message GetToolResponse {
  mcpany.mcp_router.v1.Tool tool = 1;
}

// ServiceStatus represents the health status of a service.
enum ServiceStatus {
  SERVICE_STATUS_UNKNOWN = 0;
  SERVICE_STATUS_HEALTHY = 1;
  SERVICE_STATUS_UNHEALTHY = 2;
  SERVICE_STATUS_DEGRADED = 3;
}

// ServiceState represents the runtime state of a service.
message ServiceState {
  mcpany.config.v1.UpstreamServiceConfig config = 1;
  ServiceStatus status = 2;
  string last_error = 3;
  int64 last_check_time = 4;
}
