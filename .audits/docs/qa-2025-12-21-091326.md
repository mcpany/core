# QA Documentation Audit Report

**Date:** 2025-12-21
**Auditor:** Jules (Senior Technical Quality Analyst)

## 1. Scope
This audit covered the following 5 randomly selected documents:
1. `docs/features/service_types.md`
2. `docs/features/auth.md`
3. `docs/features/policies.md`
4. `docs/features/security.md`
5. `docs/roadmap.md`

## 2. Verification Matrix

| Document | Feature / Claim | Outcome | Evidence (File/Path) |
| :--- | :--- | :--- | :--- |
| `docs/features/service_types.md` | SQL Service Type (Beta) | **Verified** | `server/pkg/upstream/sql/upstream.go` (Imports `lib/pq`, `modernc.org/sqlite`) |
| `docs/features/service_types.md` | Standard Types (HTTP, gRPC, etc.) | **Verified** | `server/pkg/upstream/{http,grpc,openapi,etc}/` exist. |
| `docs/features/auth.md` | mTLS Authentication | **Verified** | `server/pkg/upstream/http/http_pool.go` (Loads Client Cert/Key) |
| `docs/features/auth.md` | Standard Auth (API Key, Bearer, etc.) | **Verified** | `server/pkg/auth/upstream.go` (Implements Authenticator interface) |
| `docs/features/policies.md` | Call Policies (Fine-grained) | **Verified** | `server/pkg/middleware/call_policy.go` (Regex-based allow/deny) |
| `docs/features/policies.md` | Resilience & Rate Limiting | **Verified** | `server/pkg/resilience/` and `server/pkg/middleware/ratelimit*.go` |
| `docs/features/security.md` | RBAC | **Partial** | `server/pkg/app/server.go` (Implements Role/Profile checks). Doc updated. |
| `docs/roadmap.md` | Admin Management API | **Verified** | `server/pkg/app/api.go` (Implements CRUD at `/api/v1/services`). Doc updated. |
| `docs/roadmap.md` | Dynamic Web UI | **Verified** | `ui/` directory exists and `Makefile` supports `build-ui`. Doc updated. |

## 3. Changes Made

### Documentation Remediation
*   **`docs/roadmap.md`**:
    *   Updated **Role-Based Access Control (RBAC)** status from "Planned" to "Partially Implemented (User Roles & Profile Access)".
    *   Updated **Dynamic Web UI** status from "Planned" to "Implemented (Beta)".
    *   Updated **Admin Management API** status to correctly point to `/api/v1/services` instead of the registration endpoint.
*   **`docs/features/security.md`**:
    *   Updated **RBAC** status from "Planned" to "Beta".

### Code Remediation
*   No code changes were required as the features were found to be implemented or partially implemented, with documentation being the primary gap.

## 4. Roadmap Alignment Notes
*   **Admin Management API**: The codebase fulfills the Roadmap requirement for CRUD operations via the HTTP API (`pkg/app/api.go`), although the gRPC Admin API (`pkg/admin`) remains Read-Only. Documentation now accurately reflects the HTTP API capabilities.
*   **Dynamic Web UI**: The Roadmap lists this as High Priority. The presence of a Next.js project in `ui/` and build support indicates significant progress. Status updated to Beta.
*   **RBAC**: The Roadmap lists this as High Priority. The server implements logic to check User Roles against Profile requirements (`server/pkg/app/server.go`). Status updated to Partial/Beta.
*   **Codebase Health**: The high cyclomatic complexity in `pkg/upstream/http/http.go` (createAndRegisterHTTPTools) noted in the Roadmap remains an area for future refactoring but was out of scope for this audit's remediation (which focused on feature gaps).

## 5. Security & Hygiene
*   No sensitive information (keys, secrets, PII) was found in the audited documents or generated report.
*   Environment cleanup was performed: No audit reports older than 7 days were found in `.audits/docs/`.
